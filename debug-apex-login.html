<!DOCTYPE html>
<html>
<head>
    <title>Debug APEX Login</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .demo-btn { 
            margin: 5px; 
            padding: 10px 15px; 
            border: 1px solid #ccc; 
            background: #f0f0f0; 
            cursor: pointer; 
        }
        .demo-btn:hover { background: #e0e0e0; }
    </style>
</head>
<body>
    <h1>üîç Debug APEX Login</h1>
    
    <div id="status">Testing...</div>
    
    <h2>Demo Accounts:</h2>
    <button type="button" onclick="quickLogin('admin@company.com', 'admin123')" class="demo-btn">üëë Admin</button>
    <button type="button" onclick="quickLogin('pm@company.com', 'pm123')" class="demo-btn">üìä Project Manager</button>
    <button type="button" onclick="quickLogin('tech@company.com', 'tech123')" class="demo-btn">üîß Technician</button>
    <button type="button" onclick="quickLogin('client@company.com', 'client123')" class="demo-btn">üë§ Client</button>
    
    <h2>Manual Login:</h2>
    <form onsubmit="handleLogin(event)">
        <input type="email" placeholder="Email" name="email" required>
        <input type="password" placeholder="Password" name="password" required>
        <button type="submit">Login</button>
    </form>
    
    <div id="results"></div>

    <script>
        // Copy exact AppState from APEX Platform
        const AppState = {
            isLoggedIn: false,
            user: null,
            currentView: 'login',
            data: {
                projects: [],
                metrics: {},
                charts: {}
            },
            config: {
                apiUrl: 'http://localhost:3001/api',
                refreshInterval: 30000
            },
            users: [
                { id: 1, name: 'John Smith', email: 'admin@company.com', password: 'admin123', role: 'Admin', avatar: 'JS' },
                { id: 2, name: 'Sarah Johnson', email: 'pm@company.com', password: 'pm123', role: 'Project-Manager', avatar: 'SJ' },
                { id: 3, name: 'Mike Davis', email: 'lead@company.com', password: 'lead123', role: 'Team-Lead', avatar: 'MD' },
                { id: 4, name: 'Lisa Chen', email: 'tech@company.com', password: 'tech123', role: 'Technician', avatar: 'LC' },
                { id: 5, name: 'Tom Wilson', email: 'client@company.com', password: 'client123', role: 'Client', avatar: 'TW' }
            ]
        };

        function showNotification(message, type = 'info') {
            const results = document.getElementById('results');
            const color = type === 'success' ? 'green' : type === 'error' ? 'red' : 'blue';
            results.innerHTML += `<p style="color: ${color};">${type.toUpperCase()}: ${message}</p>`;
            console.log(message);
        }

        function handleLogin(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const email = formData.get('email');
            const password = formData.get('password');
            
            console.log('Manual login attempt:', email, password);
            
            const user = AppState.users.find(u => u.email === email && u.password === password);
            
            if (user) {
                loginUser(user);
            } else {
                showNotification('Invalid email or password', 'error');
            }
        }

        function quickLogin(email, password) {
            console.log('Quick login attempt for:', email);
            console.log('Available users:', AppState.users);
            
            const user = AppState.users.find(u => u.email === email && u.password === password);
            if (user) {
                console.log('User found:', user);
                loginUser(user);
            } else {
                console.log('User not found');
                showNotification('Demo account not found. Please check credentials.', 'error');
            }
        }

        function loginUser(user) {
            AppState.isLoggedIn = true;
            AppState.user = user;
            showNotification(`Successfully logged in as ${user.name} (${user.role})`, 'success');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM Content Loaded');
            console.log('AppState.users:', AppState.users);
            document.getElementById('status').innerHTML = `‚úÖ Ready - ${AppState.users.length} users loaded`;
        });
    </script>
</body>
</html>